{"version":3,"file":"defaultListboxReducer.js","sources":["../../../../../../node_modules/@mui/base/ListboxUnstyled/defaultListboxReducer.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { ActionTypes } from './useListbox.types';\nconst pageSize = 5;\nfunction findValidOptionToHighlight(index, lookupDirection, options, focusDisabled, isOptionDisabled, wrapAround) {\n  if (options.length === 0 || options.every((o, i) => isOptionDisabled(o, i))) {\n    return -1;\n  }\n  let nextFocus = index;\n  for (;;) {\n    // No valid options found\n    if (!wrapAround && lookupDirection === 'next' && nextFocus === options.length || !wrapAround && lookupDirection === 'previous' && nextFocus === -1) {\n      return -1;\n    }\n    const nextFocusDisabled = focusDisabled ? false : isOptionDisabled(options[nextFocus], nextFocus);\n    if (nextFocusDisabled) {\n      nextFocus += lookupDirection === 'next' ? 1 : -1;\n      if (wrapAround) {\n        nextFocus = (nextFocus + options.length) % options.length;\n      }\n    } else {\n      return nextFocus;\n    }\n  }\n}\nfunction getNewHighlightedOption(options, previouslyHighlightedOption, diff, lookupDirection, highlightDisabled, isOptionDisabled, wrapAround, optionComparer) {\n  var _options$nextIndex;\n  const maxIndex = options.length - 1;\n  const defaultHighlightedIndex = -1;\n  let nextIndexCandidate;\n  const previouslyHighlightedIndex = previouslyHighlightedOption == null ? -1 : options.findIndex(option => optionComparer(option, previouslyHighlightedOption));\n  if (diff === 'reset') {\n    var _options$defaultHighl;\n    return defaultHighlightedIndex === -1 ? null : (_options$defaultHighl = options[defaultHighlightedIndex]) != null ? _options$defaultHighl : null;\n  }\n  if (diff === 'start') {\n    nextIndexCandidate = 0;\n  } else if (diff === 'end') {\n    nextIndexCandidate = maxIndex;\n  } else {\n    const newIndex = previouslyHighlightedIndex + diff;\n    if (newIndex < 0) {\n      if (!wrapAround && previouslyHighlightedIndex !== -1 || Math.abs(diff) > 1) {\n        nextIndexCandidate = 0;\n      } else {\n        nextIndexCandidate = maxIndex;\n      }\n    } else if (newIndex > maxIndex) {\n      if (!wrapAround || Math.abs(diff) > 1) {\n        nextIndexCandidate = maxIndex;\n      } else {\n        nextIndexCandidate = 0;\n      }\n    } else {\n      nextIndexCandidate = newIndex;\n    }\n  }\n  const nextIndex = findValidOptionToHighlight(nextIndexCandidate, lookupDirection, options, highlightDisabled, isOptionDisabled, wrapAround);\n  return (_options$nextIndex = options[nextIndex]) != null ? _options$nextIndex : null;\n}\nfunction handleOptionSelection(option, state, props) {\n  const {\n    multiple,\n    optionComparer = (o, v) => o === v,\n    isOptionDisabled = () => false\n  } = props;\n  const {\n    selectedValue\n  } = state;\n  const optionIndex = props.options.findIndex(o => props.optionComparer(option, o));\n  if (isOptionDisabled(option, optionIndex)) {\n    return state;\n  }\n  if (multiple) {\n    var _ref, _ref2;\n    const selectedValues = (_ref = selectedValue) != null ? _ref : [];\n    // if the option is already selected, remove it from the selection, otherwise add it\n    const newSelectedValues = selectedValues.some(sv => optionComparer(sv, option)) ? selectedValue.filter(v => !optionComparer(v, option)) : [...((_ref2 = selectedValue) != null ? _ref2 : []), option];\n    return {\n      selectedValue: newSelectedValues,\n      highlightedValue: option\n    };\n  }\n  if (selectedValue != null && optionComparer(option, selectedValue)) {\n    return state;\n  }\n  return {\n    selectedValue: option,\n    highlightedValue: option\n  };\n}\nfunction handleKeyDown(event, state, props) {\n  const {\n    options,\n    isOptionDisabled,\n    disableListWrap,\n    disabledItemsFocusable,\n    optionComparer\n  } = props;\n  const moveHighlight = (diff, direction, wrapAround) => {\n    return getNewHighlightedOption(options, state.highlightedValue, diff, direction, disabledItemsFocusable != null ? disabledItemsFocusable : false, isOptionDisabled != null ? isOptionDisabled : () => false, wrapAround, optionComparer);\n  };\n  switch (event.key) {\n    case 'Home':\n      return _extends({}, state, {\n        highlightedValue: moveHighlight('start', 'next', false)\n      });\n    case 'End':\n      return _extends({}, state, {\n        highlightedValue: moveHighlight('end', 'previous', false)\n      });\n    case 'PageUp':\n      return _extends({}, state, {\n        highlightedValue: moveHighlight(-pageSize, 'previous', false)\n      });\n    case 'PageDown':\n      return _extends({}, state, {\n        highlightedValue: moveHighlight(pageSize, 'next', false)\n      });\n    case 'ArrowUp':\n      // TODO: extend current selection with Shift modifier\n      return _extends({}, state, {\n        highlightedValue: moveHighlight(-1, 'previous', !(disableListWrap != null ? disableListWrap : false))\n      });\n    case 'ArrowDown':\n      // TODO: extend current selection with Shift modifier\n      return _extends({}, state, {\n        highlightedValue: moveHighlight(1, 'next', !(disableListWrap != null ? disableListWrap : false))\n      });\n    case 'Enter':\n    case ' ':\n      if (state.highlightedValue === null) {\n        return state;\n      }\n      return handleOptionSelection(state.highlightedValue, state, props);\n    default:\n      break;\n  }\n  return state;\n}\nfunction handleBlur(state) {\n  return _extends({}, state, {\n    highlightedValue: null\n  });\n}\nconst textCriteriaMatches = (nextFocus, searchString, stringifyOption) => {\n  var _stringifyOption;\n  const text = (_stringifyOption = stringifyOption(nextFocus)) == null ? void 0 : _stringifyOption.trim().toLowerCase();\n  if (!text || text.length === 0) {\n    // Make option not navigable if stringification fails or results in empty string.\n    return false;\n  }\n  return text.indexOf(searchString) === 0;\n};\nfunction handleTextNavigation(state, searchString, props) {\n  const {\n    options,\n    isOptionDisabled,\n    disableListWrap,\n    disabledItemsFocusable,\n    optionComparer,\n    optionStringifier\n  } = props;\n  const moveHighlight = previouslyHighlightedOption => {\n    return getNewHighlightedOption(options, previouslyHighlightedOption, 1, 'next', disabledItemsFocusable != null ? disabledItemsFocusable : false, isOptionDisabled != null ? isOptionDisabled : () => false, !(disableListWrap != null ? disableListWrap : false), optionComparer);\n  };\n  const startWithCurrentOption = searchString.length > 1;\n  let nextOption = startWithCurrentOption ? state.highlightedValue : moveHighlight(state.highlightedValue);\n\n  // use `for` instead of `while` prevent infinite loop\n  for (let index = 0; index < options.length; index += 1) {\n    // Return un-mutated state if looped back to the currently highlighted value\n    if (!nextOption || !startWithCurrentOption && state.highlightedValue === nextOption) {\n      return state;\n    }\n    if (textCriteriaMatches(nextOption, searchString, optionStringifier) && (!isOptionDisabled(nextOption, options.indexOf(nextOption)) || disabledItemsFocusable)) {\n      // The nextOption is the element to be highlighted\n      return _extends({}, state, {\n        highlightedValue: nextOption\n      });\n    }\n    // Move to the next element.\n    nextOption = moveHighlight(nextOption);\n  }\n\n  // No option match text search criteria\n  return state;\n}\nfunction handleOptionsChange(options, previousOptions, state, props) {\n  var _options$find, _options$find2;\n  const {\n    multiple,\n    optionComparer\n  } = props;\n  const newHighlightedOption = state.highlightedValue == null ? null : (_options$find = options.find(option => optionComparer(option, state.highlightedValue))) != null ? _options$find : null;\n  if (multiple) {\n    var _ref3;\n    // exclude selected values that are no longer in the options\n    const selectedValues = (_ref3 = state.selectedValue) != null ? _ref3 : [];\n    const newSelectedValues = selectedValues.filter(selectedValue => options.some(option => optionComparer(option, selectedValue)));\n    return {\n      highlightedValue: newHighlightedOption,\n      selectedValue: newSelectedValues\n    };\n  }\n  const newSelectedValue = (_options$find2 = options.find(option => optionComparer(option, state.selectedValue))) != null ? _options$find2 : null;\n  return {\n    highlightedValue: newHighlightedOption,\n    selectedValue: newSelectedValue\n  };\n}\nexport default function defaultListboxReducer(state, action) {\n  const {\n    type\n  } = action;\n  switch (type) {\n    case ActionTypes.keyDown:\n      return handleKeyDown(action.event, state, action.props);\n    case ActionTypes.optionClick:\n      return handleOptionSelection(action.option, state, action.props);\n    case ActionTypes.blur:\n      return handleBlur(state);\n    case ActionTypes.setValue:\n      return _extends({}, state, {\n        selectedValue: action.value\n      });\n    case ActionTypes.setHighlight:\n      return _extends({}, state, {\n        highlightedValue: action.highlight\n      });\n    case ActionTypes.textNavigation:\n      return handleTextNavigation(state, action.searchString, action.props);\n    case ActionTypes.optionsChange:\n      return handleOptionsChange(action.options, action.previousOptions, state, action.props);\n    default:\n      return state;\n  }\n}"],"names":["_extends","ActionTypes"],"mappings":"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"}