{"version":3,"file":"useMenuItem.js","sources":["../../../../../../node_modules/@mui/base/MenuItemUnstyled/useMenuItem.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_useId as useId, unstable_useForkRef as useForkRef } from '@mui/utils';\nimport { MenuUnstyledContext } from '../MenuUnstyled';\nimport { useButton } from '../ButtonUnstyled';\nimport useForcedRerendering from '../utils/useForcedRerendering';\n\n/**\n *\n * Demos:\n *\n * - [Unstyled Menu](https://mui.com/base/react-menu/#hooks)\n *\n * API:\n *\n * - [useMenuItem API](https://mui.com/base/api/use-menu-item/)\n */\nexport default function useMenuItem(props) {\n  var _itemState$disabled;\n  const {\n    disabled = false,\n    ref,\n    label\n  } = props;\n  const id = useId();\n  const menuContext = React.useContext(MenuUnstyledContext);\n  const itemRef = React.useRef(null);\n  const handleRef = useForkRef(itemRef, ref);\n  if (menuContext === null) {\n    throw new Error('MenuItemUnstyled must be used within a MenuUnstyled');\n  }\n  const {\n    registerItem,\n    unregisterItem,\n    open,\n    registerHighlightChangeHandler\n  } = menuContext;\n  React.useEffect(() => {\n    if (id === undefined) {\n      return undefined;\n    }\n    registerItem(id, {\n      disabled,\n      id,\n      ref: itemRef,\n      label\n    });\n    return () => unregisterItem(id);\n  }, [id, registerItem, unregisterItem, disabled, ref, label]);\n  const {\n    getRootProps: getButtonProps,\n    focusVisible\n  } = useButton({\n    disabled,\n    focusableWhenDisabled: true,\n    ref: handleRef\n  });\n\n  // Ensure the menu item is focused when highlighted\n  const [focusRequested, requestFocus] = React.useState(false);\n  const focusIfRequested = React.useCallback(() => {\n    if (focusRequested && itemRef.current != null) {\n      itemRef.current.focus();\n      requestFocus(false);\n    }\n  }, [focusRequested]);\n  React.useEffect(() => {\n    focusIfRequested();\n  });\n  React.useDebugValue({\n    id,\n    disabled,\n    label\n  });\n  const itemState = menuContext.getItemState(id != null ? id : '');\n  const {\n    highlighted\n  } = itemState != null ? itemState : {\n    highlighted: false\n  };\n  const rerender = useForcedRerendering();\n  React.useEffect(() => {\n    function updateHighlightedState(highlightedItemId) {\n      if (highlightedItemId === id && !highlighted) {\n        rerender();\n      } else if (highlightedItemId !== id && highlighted) {\n        rerender();\n      }\n    }\n    return registerHighlightChangeHandler(updateHighlightedState);\n  });\n  React.useEffect(() => {\n    // TODO: this should be handled by the MenuButton\n    requestFocus(highlighted && open);\n  }, [highlighted, open]);\n  if (id === undefined) {\n    return {\n      getRootProps: other => _extends({}, other, getButtonProps(other), {\n        role: 'menuitem'\n      }),\n      disabled: false,\n      focusVisible,\n      highlighted: false\n    };\n  }\n  return {\n    getRootProps: other => {\n      const optionProps = menuContext.getItemProps(id, other);\n      return _extends({}, other, getButtonProps(other), {\n        tabIndex: optionProps.tabIndex,\n        id: optionProps.id,\n        role: 'menuitem'\n      });\n    },\n    disabled: (_itemState$disabled = itemState == null ? void 0 : itemState.disabled) != null ? _itemState$disabled : false,\n    focusVisible,\n    highlighted\n  };\n}"],"names":["useId","React","MenuUnstyledContext","useForkRef","useButton","useForcedRerendering","_extends"],"mappings":"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"}