{"version":3,"file":"useOption.js","sources":["../../../../../../node_modules/@mui/base/OptionUnstyled/useOption.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_useForkRef as useForkRef } from '@mui/utils';\nimport { SelectUnstyledContext } from '../SelectUnstyled/SelectUnstyledContext';\nimport useForcedRerendering from '../utils/useForcedRerendering';\n\n/**\n *\n * API:\n *\n * - [useOption API](https://mui.com/base/api/use-option/)\n */\nexport default function useOption(params) {\n  const {\n    value,\n    optionRef: optionRefParam\n  } = params;\n  const selectContext = React.useContext(SelectUnstyledContext);\n  if (!selectContext) {\n    throw new Error('Option must have access to the SelectUnstyledContext (i.e., be used inside a SelectUnstyled component).');\n  }\n  const {\n    getOptionProps,\n    getOptionState,\n    listboxRef,\n    registerHighlightChangeHandler,\n    registerSelectionChangeHandler\n  } = selectContext;\n  const optionState = getOptionState(value);\n  const {\n    selected,\n    highlighted\n  } = optionState;\n  const rerender = useForcedRerendering();\n  React.useEffect(() => {\n    function updateSelectedState(selectedValues) {\n      if (!selected) {\n        if (Array.isArray(selectedValues)) {\n          if (selectedValues.includes(value)) {\n            rerender();\n          }\n        } else if (selectedValues === value) {\n          rerender();\n        }\n      } else if (Array.isArray(selectedValues)) {\n        if (!selectedValues.includes(value)) {\n          rerender();\n        }\n      } else if (selectedValues !== value) {\n        rerender();\n      }\n    }\n    return registerSelectionChangeHandler(updateSelectedState);\n  }, [registerSelectionChangeHandler, rerender, selected, value]);\n  React.useEffect(() => {\n    function updateHighlightedState(highlightedValue) {\n      if (highlightedValue === value && !highlighted) {\n        rerender();\n      } else if (highlightedValue !== value && highlighted) {\n        rerender();\n      }\n    }\n    return registerHighlightChangeHandler(updateHighlightedState);\n  }, [registerHighlightChangeHandler, rerender, value, highlighted]);\n  const optionRef = React.useRef(null);\n  const handleRef = useForkRef(optionRefParam, optionRef);\n  React.useEffect(() => {\n    // Scroll to the currently highlighted option\n    if (highlighted) {\n      if (!listboxRef.current || !optionRef.current) {\n        return;\n      }\n      const listboxClientRect = listboxRef.current.getBoundingClientRect();\n      const optionClientRect = optionRef.current.getBoundingClientRect();\n      if (optionClientRect.top < listboxClientRect.top) {\n        listboxRef.current.scrollTop -= listboxClientRect.top - optionClientRect.top;\n      } else if (optionClientRect.bottom > listboxClientRect.bottom) {\n        listboxRef.current.scrollTop += optionClientRect.bottom - listboxClientRect.bottom;\n      }\n    }\n  }, [highlighted, listboxRef]);\n  return {\n    getRootProps: (otherHandlers = {}) => _extends({}, otherHandlers, getOptionProps(value, otherHandlers), {\n      ref: handleRef\n    }),\n    highlighted,\n    index: optionState.index,\n    selected\n  };\n}"],"names":[],"mappings":"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"}